<section class="container my-2 pt-4">
  <div class="container narrow-container">
    <div class="row g-0 align-items-stretch border rounded overflow-hidden shadow-ls">

      <div class="col-12 col-lg-6">
        <img src="images/DSC_4390.JPG" alt="Team-img" class="img-fluid h-100 w-100 object-fit-cover">
      </div>

      <div class="col-12 col-lg-6 d-flex">
        <div class="p-5 bg-light flex-fill d-flex flex-column justify-content-center">
          <p class="mb-4 fs-5 text-muted">Join our amazing team. Submit your CV and weâ€™ll get in touch!</p>

          <form [formGroup]="cvForm" (ngSubmit)="onSave()">
            <!-- name -->
            <div class="">
              <label for="name" class="form-label">Full name</label>
              <input type="text" class="form-control" id="name" placeholder="Your name" formControlName="name" required>
              <div class="text-danger fs-7 mt-1" style="min-height: 1.5em;">
                @if(cvForm.controls["name"].touched && cvForm.controls["name"].errors?.["required"]){
                <div>Name is required</div>
                } @else if(cvForm.controls["name"].touched && cvForm.controls["name"].errors?.["minlength"]){
                <div>Min char 3 required</div>
                }
              </div>
            </div>

            <!-- email -->
            <div class="">
              <label for="email" class="form-label">Email address</label>
              <input type="email" class="form-control" id="email" placeholder="you@example.com" formControlName="email"
                required>
              <div class="text-danger fs-7 mt-1" style="min-height: 1.5em;">
                <div *ngIf="cvForm.controls['email'].touched && cvForm.controls['email'].errors?.['required']">
                  Email is required.
                </div>
              </div>
            </div>

            <!-- phone -->
            <div class="">
              <label for="mobileNo" class="form-label">Phone Number</label>
              <div class="input-group" style="display: flex; gap: 6px; align-items: center;">
                <ng-select [items]="countrylisinterface" bindLabel="countryName" bindValue="countryISDCode"
                  formControlName="countryCode" placeholder="+ Country" [searchable]="true" [clearable]="false"
                  class="flex-shrink-0" style="width: 100px; min-width: 90px;">
                  <ng-template ng-option-tmp let-item="item">
                    <img [src]="item.flag" class="me-1" style="width:20px; height:14px;">
                    {{ item.countryName }} {{ item.countryISDCode }}
                  </ng-template>
                  <ng-template ng-label-tmp let-item="item">
                    <img [src]="item.flag" class="me-1" style="width:20px; height:14px;">
                    {{ item.countryISDCode }}
                  </ng-template>
                </ng-select>
                <input type="tel" maxlength="12" placeholder="Enter mobile number" (keypress)="allowOnlyNumbers($event)"
                  class="form-control flex-grow-1" style="border-radius: 4px;" id="mobileNo"
                  formControlName="mobileNo" />
              </div>
              <div class="text-danger fs-7 mt-2" style="min-height: 2em;">
                <div *ngIf="cvForm.controls['mobileNo'].touched && cvForm.controls['mobileNo'].errors?.['required']">
                  Phone number is required.
                </div>
                <div *ngIf="cvForm.controls['mobileNo'].errors?.['pattern']">
                  Please enter a valid mobile number.
                </div>
                <div *ngIf="cvForm.get('mobileNo')?.errors?.['minlength']">
                  Please enter at least 10 digits.
                </div>
              </div>
            </div>

            <!-- CV Upload -->
            <label for="cvUpload" class="form-label">CV Upload</label>
            <div class="mt-0" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
              <input type="file" id="cvUpload" #fileInput (change)="onFileChange($event)" accept=".pdf,.doc,.docx"
                formControlName="cvUpload" hidden />
              <label for="cvUpload" class="border rounded p-4 text-center" style="cursor: pointer; display: block;">
                <div *ngIf="uploadedFileName" class="text-success">
                  <span class="text-muted text-black">Selected file:</span> {{ uploadedFileName || 'No file selected' }}
                </div>
                <div *ngIf="!uploadedFileName" class="text-muted">
                  Click or drag a file to this area to upload
                </div>
              </label>
              <div class="text-danger fs-7 mt-1" style="min-height: 1.5em;">
                <div *ngIf="cvUpload.touched && cvUpload.errors?.['required']">
                  File is required.
                </div>
              </div>
            </div>

            <!-- Submit -->
            <div class="d-grid mt-3">
              <button type="submit" class="btn btn-submit-cv btn-primary btn-lg">Submit CV</button>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
</section>

<app-messagepopup #messagepopup [headingpopup]="headingText" [textpopup]="messagePoppup" [IsSuccesspopup]="IsSuccess">
</app-messagepopup>
