<div class="row page-heading properties-details">
    <div class="container narrow-container">
        <div class="row align-items-center">
            <div class="col-md-12">
                <nav aria-label="breadcrumb" class="mb-2">
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item"><a href="/"><i class="bi bi-house-door"></i> Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">{{unitTitle}}</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="row property-image-slider">
    <div class="container narrow-container">
        <div class="row">
            <div class="col-md-12">
                <div class="image-gallery-layout">
                    <div class="left-image">
                        <img [src]="firstUnitImagePath" class="thumbnail blur-load" (load)="OnImageLoad($event)" alt="Image 1" />
                    </div>
                    <div class="right-images">
                        <div class="top-image">
                            <img [src]="secondUnitImagePath" class="thumbnail blur-load" (load)="OnImageLoad($event)" alt="Image 2" />
                        </div>
                        <div class="bottom-image">
                            <img [src]="thirdUnitImagePath" class="thumbnail blur-load" (load)="OnImageLoad($event)" alt="Image 3" />
                            <div class="total-image-count"><i class="bi bi-camera"></i> {{unitImagesCount}}</div>
                        </div>
                    </div>
                </div>

                <div id="splide-modal" class="splide-modal-overlay" style="display: none;">
                    <div class="modal-splide-wrapper">
                        <button class="close-modal">&times;</button>
                        <div id="main-splide" class="splide main-slider">
                            <div class="splide__track">
                                <ul class="splide__list">
                                    @for (item of unitImages; track $index) {
                                        <li class="splide__slide">
                                            <div class="image-wrapper">
                                                <img [src]="item.path" alt="Property Image" />
                                            </div>
                                        </li>
                                    }
                                </ul>
                            </div>
                        </div>
                        <div id="thumb-splide" class="splide thumb-slider">
                            <div class="splide__track">
                                <ul class="splide__list">
                                    @for (item of unitImages; track $index) {
                                        <li class="splide__slide">
                                            <div class="image-wrapper">
                                                <img [src]="item.path" alt="Property Image" />
                                            </div>
                                        </li>
                                    }
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row property-description">
    <div class="container narrow-container">
        <div class="row">
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-12 property-main-heading">
                        <ul>
                            <li class="for-sale">{{unitPurpose}}</li>
                            <li>{{unitStatus}}</li>
                        </ul>
                        <h1 class="property-price fs-4 mt-1 m-0"><strong>{{unitTitle}}</strong></h1>
                        <div class="fs-4">
                            <span>{{unitPrice | number:'1.0-0'}}</span> AED
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <p class="mb-2 text-secondary small">
                            <i class="bi bi-geo-alt"></i> {{unitAddress}}
                        </p>
                    </div>
                    <div class="col-md-12">
                        <div class="property-features">
                            <ul>
                                <li><img src="images/bedIcon.png"> <span>{{unitBedroom}}</span></li>
                                <li><img src="images/showerIcon.png"> <span>{{unitBathroom}}</span></li>
                                <li><img src="images/scaleIcon.png"> <span>{{unitSqFeet}}</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-12 mt-5" *ngIf="unitDetailsList.length > 1">
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <div class="col-md-12" *ngIf="unitDetailsList.length > 1">
                        <h2 class="fs-4 mt-3"><strong>Property Details</strong></h2>
                    </div>
                    <div class="col-md-12 mt-3" *ngIf="unitDetailsList.length > 1">
                        <div class="row property-details-list">
                            @for (items of unitDetailsList; track $index) {
                                <div class="col-md-6 mb-2 d-flex">
                                    <i class="bi bi-circle me-2"></i>
                                    <div class="d-flex">
                                        <strong class="me-2" style="width: 180px; display: inline-block;">{{items.elementName}}</strong>
                                        <span class="text-truncate">{{items.details}}</span>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    <div class="col-md-12 mt-5" *ngIf="unitDescription">
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <div class="col-md-12" *ngIf="unitDescription">
                        <h2 class="fs-4 mt-3"><strong>Description</strong></h2>
                    </div>
                    <div class="col-md-12 mt-3" [innerHTML]="unitDescription" *ngIf="unitDescription">
                    </div>
                    <div class="col-md-12 mt-5" *ngIf="unitAmenitiesList.length > 1">
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <div class="col-md-12" *ngIf="unitAmenitiesList.length > 1">
                        <h2 class="fs-4 mt-3"><strong>Amenities</strong></h2>
                    </div>
                    <div class="col-md-12 mt-3" *ngIf="unitAmenitiesList.length > 1">
                        <div class="row property-details-list">
                            @for (item of unitAmenitiesList; track $index) {
                                <div class="col-md-6 mb-2">
                                    <i class="bi bi-circle me-2"></i>
                                    {{item.amenties}}
                                </div>
                            }
                        </div>
                    </div>
                    <div class="col-md-12 mt-5" *ngIf="unitPlacesNearBy.length > 1">
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <div class="col-md-12" *ngIf="unitPlacesNearBy.length > 1">
                        <h2 class="fs-4 mt-3"><strong>Places Near By</strong></h2>
                    </div>
                    <div class="col-md-12 mt-3" *ngIf="unitPlacesNearBy.length > 1">
                        <div class="row property-details-list">
                            @for (items of unitPlacesNearBy; track $index) {
                                <div class="col-md-6 mb-2 d-flex">
                                    <i class="bi bi-circle me-2"></i>
                                    <div class="d-flex">
                                        <strong class="me-2" style="width: 180px; display: inline-block;">{{items.placeName}}</strong>
                                        <span class="text-truncate">{{items.distance + ' ' + items.type}}</span>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    <div class="col-md-12 mt-5" *ngIf="unitVideoPath">
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <div class="col-md-12" *ngIf="unitVideoPath">
                        <h2 class="fs-4 mt-3"><strong>Video</strong></h2>
                    </div>
                    <div class="col-md-12 mt-3 video-player" *ngIf="unitVideoPath">
                        <div class="position-relative" style="max-width: 100%; height: auto;">
                            <video #videoPlayer class="w-100 h-100 rounded" [src]="unitVideoPath" controls>
                                Your browser does not support the video tag.
                            </video>
                            <button
                                class="btn btn-light rounded-circle position-absolute top-50 start-50 translate-middle shadow-lg"
                                style="width: 60px; height: 60px;"
                                (click)="playVideo(videoPlayer, $event)"
                                *ngIf="!isPlaying">
                                <i class="bi bi-play-fill fs-3"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12 mt-5" *ngIf="unitbroucherDocument">
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <div class="col-md-12 text-end mt-2" *ngIf="unitbroucherDocument">
                        <a href="{{unitbroucherDocument}}" target="_blank" download class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">
                            <i class="bi bi-download me-1"></i> Brochure Download
                        </a>
                    </div>
                    <div class="col-md-12 mt-5"> 
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <app-mortgagecalculator *ngIf="unitPrice" [PropertyPrice]="unitPrice"></app-mortgagecalculator>
                    <div class="col-md-12 mt-5" *ngIf="unitMapPath">
                        <div class="col-md-12 border-bottom"></div>
                    </div>
                    <div class="col-md-12" *ngIf="unitMapPath">
                        <h2 class="fs-4 mt-3"><strong>Map View</strong></h2>
                        <p class="text-muted mb-2">Trafford Residence, Residential District, Dubai South, Dubai, UAE</p>
                    </div>
                    <div class="col-md-12 mt-3 video-player" *ngIf="unitMapPath">
                        <div class="map-responsive" style="overflow:hidden; padding-bottom:56.25%; position:relative; height:0;">
                            <iframe 
                                [src]="unitMapPath" 
                                width="100%" 
                                height="100%" 
                                style="border:0; position:absolute; top:0; left:0;" 
                                allowfullscreen="" 
                                loading="lazy" 
                                referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 contact-seller">
            <div class="card shadow-sm p-3 sticky-top" style="top: 20px;">
                <h5 class="mb-3 pb-2 fw-bold border-bottom">Contact Seller</h5>
                <div class="d-flex align-items-center mb-3">
                <img [src]="unitContactSellerAvatar" alt="Seller" class="rounded-circle me-3 border" style="object-fit: cover; object-position: top;" width="60" height="60">
                <div>
                    <h6 class="mb-0">{{unitContactSellerName}}</h6>
                    <small class="text-muted">{{unitContactSellerDesignation}}</small>
                </div>
                </div>

                <ul class="list-unstyled mb-3">
                <li class="mb-2">
                    <i class="bi bi-telephone me-2"></i>
                    <strong>Mobile:</strong> {{unitContactSellerPhone}}
                </li>
                <li class="mb-2">
                    <i class="bi bi-envelope me-2"></i>
                    <strong>Email:</strong> {{unitContactSellerEmail}}
                </li>
                </ul>

                <div class="d-flex gap-2">
                <a href="https://wa.me/971501234567" target="_blank" class="btn btn-whatsapp w-50">
                    <i class="bi bi-whatsapp me-1"></i> WhatsApp
                </a>
                <a href="tel:+971501234567" class="btn btn-call w-50">
                    <i class="bi bi-telephone me-1"></i> Call
                </a>
                </div>
            </div>
            </div>

        </div>
    </div>
</div>